<!DOCTYPE html>

<head>
  <title>Dustbin.work</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="container">
    <div class="main" id="section-1">
      <img src="logo.png" class="logo rellax" data-rellax-speed="1">
      <!-- <img src="illustration.png" style="visibility: hidden;  width: 100%; height: auto;"> -->
      <div class="text rellax" data-rellax-speed="0.5">
        <div class="first">
          If you hate <span class="bold" id="demo">Paperwork</span>,
        </div>
        <div class="second">
          You will love <span class="bold">Dustbin</span>
        </div>
        <a href="#section-2" class="btn1">
          Receive Invite
        </a>
      </div>
      <div class="oval1 rellax" data-rellax-speed="1"></div>
      <div class="oval2 rellax"></div>
      <div class="oval3 rellax"></div>
      <div class="oval4 rellax"></div>
    </div>
    <div class="thanks" id="thanks">
      <img src="logo.png" class="logo">
      <div class="thanks-text">
        Thanks!
      </div>
      <div class="text">
        <div class="first">
          <i>Check your Email</i>
        </div>
        <div class="second">
          Will see you very very soon...
        </div>
      </div>
      <div class="oval1"></div>
      <div class="oval2"></div>
      <div class="oval3"></div>
      <div class="oval4"></div>
    </div>
    <div class="section-2" id="section-2">
      <img src="less.png" class="rellax"  data-rellax-speed="0.5">
      <div class="content">
        From proposal to payment: A proactive app to give you more time to do what you love
      </div>
      <div>
        <input type="textbox" id="email" class="txtbox" placeholder="Your email address for an early invite"
          onkeypress="keyPerss(event)">
      </div>
      <div>
        <button class="btn-invite" onClick="save()">
          RECEIVE INVITE
          <div class="spinner" id="spinner"></div>
        </button>
      </div>
      <div id="notValid">
        Email Id Not Valid
      </div>
      <div id="error">
        Something went wrong, Please try again later.
      </div>
    </div>
    <div class="footer-logo"id="footer">
      d.
    </div>
    <script type="text/javascript" src="Typewriter.js"></script>
    <script>
      var demo = document.getElementById('demo');
      var typewriter = new Typewriter(demo, {
        strings: ['Paperwork', 'Tracking expenses', 'Writing invoices', 'Admin work', 'getting paid late'],
        delay: 'natural',
        loop: true,
        autoStart: true,
      });
      typewriter.start()
    </script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#config-web-app -->

    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyDReI8odN5Cff3uW_NMyAMjInyEQqDT5eo",
        authDomain: "dustbin-work-6673c.firebaseapp.com",
        databaseURL: "https://dustbin-work-6673c.firebaseio.com",
        projectId: "dustbin-work-6673c",
        storageBucket: "",
        messagingSenderId: "284870385360",
        appId: "1:284870385360:web:b399d6db6dcbdabb"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
    </script>
    <script>
      function keyPerss(event) {
        var x = event.which || event.keyCode;
        if (x == 13) {
          save();
        }
      }
      function save() {
        email = document.getElementById('email').value;
        if (validateEmail(email)) {
          writeUserData(email);
        }
      }
      function validateEmail(emailField) {
        var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
        if (reg.test(emailField) == false || emailField == '') {
          document.getElementById('notValid').style.display = 'block';
          console.log("false");
          return false;
        }
        document.getElementById('notValid').style.display = 'none';
        console.log("true;");
        return true;
      }

      var database = firebase.database();
      function writeUserData(email) {
        console.log("email", email);
        document.getElementById('spinner').style.display = 'block';
        firebase.database().ref('inviteUser').push({
          email: email
        }, function (error) {
          if (error) {
            document.getElementById('error').style.display = 'block';
            document.getElementById('spinner').style.display = 'none';
          } else {
            console.log("submitted");
            document.getElementById('error').style.display = 'none';
            document.getElementById('section-1').style.display = 'none';
            document.getElementById('section-2').style.display = 'none';
            document.getElementById('thanks').style.display = 'block';
            document.getElementById('footer').style.display = 'none';
            document.getElementById('spinner').style.display = 'none';
            document.getElementById('thanks').classList.add('thanks-animate');
          }
        })
      }
    </script>
    <script src="rellax.min.js"></script>
    <script>
      var rellax = new Rellax('.rellax');
    </script>
  </div>
</body>

</html>